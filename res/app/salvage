


    	<!-- editor -->
    	<div id="editor" class="content loader pane scale-transition scale-out" style="height:90%;">
		<div  class="hide-on-med-and-down" style="display:flex;  align-items: center; justify-content: space-evenly; margin:12px; margin-top:24px;">
			<div >
				<div class="hiddenfile"><input name="upload" type="file" id="preview" onchange="checkFile();" multiple="multiple"/></div>
			<a id="dropdown-template" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-temp' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">dynamic_feed</i>Template</a>
			<a id="dropdown-file" class="waves-effect waves-light blue lighten-4 btn dropdown-trigger" href='#' data-target='dropdown-file' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">image</i>Image</a>
			<a style="margin-right:8px; width:150px;" onclick="showPreview();" class="waves-effect waves-grey btn-flat"><i class="material-icons left">web_asset</i>Preview</a>
			<a style="margin-right:8px; width:150px;" onclick="clearEditor();" class="waves-effect waves-grey btn-flat"><i class="material-icons left">refresh</i>Clear</a></div>
			
		<div>
			<a onclick="setContent();" class="waves-effect waves-green green btn"><i class="material-icons right">arrow_forward</i><span class='edit-device'>Continue</span></a>
			<a onclick="showPreview();" class="waves-effect waves-grey btn-flat"><i class="material-icons">cancel</i></a></div></div>
		
		<div  class="screen-hide edit-hide" style=" align-items: center; justify-content: space-evenly; margin:12px; margin-top:24px;">
		<div>
				<div class="hiddenfile"><input name="upload" type="file" id="preview" onchange="checkFile();" multiple="multiple"/></div>
			<a id="dropdown-template" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-temp' style="margin-right:8px;" ><i id="view-icon" class="material-icons">dynamic_feed</i></a>
			<a id="dropdown-file" class="waves-effect waves-light blue lighten-4 btn dropdown-trigger" href='#' data-target='dropdown-file' style="margin-right:8px;" ><i id="view-icon" class="material-icons">attach_file</i></a>
			<a style="margin-right:8px;" onclick="showPreview();" class="waves-effect waves-grey btn-flat"><i class="material-icons">web_asset</i></a>
			<a style="margin-right:8px;" onclick="clearEditor();" class="waves-effect waves-grey btn-flat"><i class="material-icons">refresh</i></a></div>
			
		<div>
			<a onclick="setContent();" class="waves-effect waves-green green btn"><i class="material-icons">arrow_forward</i><span class='edit-device'></span></a>
			<a onclick="showPreview();" class="waves-effect waves-grey btn-flat"><i class="material-icons">cancel</i></a></div></div>
		
        	<div id="pad" class="z-depth-2" contentEditable="true" style="text-align:left; overflow-y: auto; width:90%; border:1px solid darkgrey; box-shadow: 1px 1px beige; border-radius: 8px;padding: 12px;margin:auto;font-size:20px;height:100%; background-color:whitesmoke;"></div>
	
		<div style="display:flex; justify-content:space-between; margin:24px;position:sticky;bottom:24px;padding-right:48px;width:100%;">
			<div id="show-progress" class="progress" style="display:none;"><div class="indeterminate"></div></div>
		</div></div>

	<!-- shop -->
	<div id="shopper" class="content loader pane  scale-transition scale-out" style="margin-top:120px;">
		<button onclick="showView('mapper');">Return</button>
		<a id="dropdown-mapper" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-map' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">dynamic_feed</i>Template</a>
		<div class="row"><div class="input-field col s12">
          		<textarea id="textarea1" class="materialize-textarea"></textarea><label for="textarea1">Textarea</label></div></div></div>

<!-- manual -->
	<div id="manual" class="content loader pane  scale-transition scale-out" style="margin-top:120px;">
		<button onclick="showView('mapper');">Return</button>
		<a id="dropdown-mapper" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-map' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">dynamic_feed</i>Template</a>
		<div class="row"><div class="input-field col s12">
          		<textarea id="textarea1" class="materialize-textarea"></textarea><label for="textarea1">Textarea</label></div></div></div>

<!-- trade -->
	<div id="trade" class="content loader pane  scale-transition scale-out" style="margin-top:120px;">
		<button onclick="showView('mapper');">Return</button>
		<a id="dropdown-mapper" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-map' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">dynamic_feed</i>Template</a>
		<div class="row"><div class="input-field col s12">
          		<textarea id="textarea1" class="materialize-textarea"></textarea><label for="textarea1">Textarea</label></div></div></div>

<!-- help -->
	<div id="help" class="content loader pane  scale-transition scale-out" style="margin-top:120px;">
		<button onclick="showView('mapper');">Return</button>
		<a id="dropdown-mapper" class="waves-effect waves-light blue lighten-2 btn dropdown-trigger" href='#' data-target='dropdown-map' style="margin-right:8px; width:150px;" ><i id="view-icon" class="material-icons left">dynamic_feed</i>Template</a>
		<div class="row"><div class="input-field col s12">
          		<textarea id="textarea1" class="materialize-textarea"></textarea><label for="textarea1">Textarea</label></div></div></div></div>

<!-- items -->
<ul id='dropdown-open' class='dropdown-content'>
    	<li><a href="#!" onclick="opens.sort(openAZ); showList('open');">Name&nbsp;&nbsp; &#8595;</a></li><li><a href="#!" onclick="opens.sort(openZA); showList('open');">Name&nbsp;&nbsp; &#8593;</a></li>
    	<li style="margin-top:0;"class="divider" tabindex="-1"></li>
    	<li><a href="#!" onclick="opens.sort(open90); showList('open');">Count&nbsp;&nbsp; &#8595;</a></li><li><a href="#!" onclick="opens.sort(open09); showList('open');">Count&nbsp;&nbsp; &#8593;</a></li>
	<li style="margin-top:0;" class="divider" tabindex="-1"></li>
	<li><a href="#!" onclick="opens.sort(openaz); showList('open');">Color&nbsp;&nbsp; &#8595;</a></li><li><a href="#!" onclick="opens.sort(openza); showList('open');">Color&nbsp;&nbsp; &#8593;</a></li></ul>

<ul id='dropdown-domain' class='dropdown-content'>
    	<li><a href="#!" onclick="domains.sort(domainAZ); showList('domain');">Name &#8595;</a></li><li><a href="#!" onclick="domains.sort(domainZA); showList('domain');">Name &#8593;</a></li>
    	<li style="margin-top:0;"class="divider" tabindex="-1"></li>
    	<li><a href="#!" onclick="domains.sort(domainaz); showList('domain');">DateTime &#8593;</a></li><li><a href="#!" onclick="domains.sort(domainza); showList('domain');">DateTime &#8595;</a></li>
	<li style="margin-top:0;" class="divider" tabindex="-1"></li>
	<li><a href="#!" onclick="domains.sort(domain09); showList('domain');">Price &#8595;</a></li><li><a href="#!" onclick="domains.sort(domain90); showList('domain');">Price &#8593;</a></li></ul>

<ul id='dropdown-deed' class='dropdown-content'>
    	<li><a href="#!">Name &#8595;</a></li><li><a href="#!">Name &#8593;</a></li>
    	<li class="divider" tabindex="-1"></li>
    	<li><a href="#!">DateTime &#8593;</a></li><li><a href="#!">DateTime &#8595;</a></li>
	<li class="divider" tabindex="-1"></li>
	<li><a href="#!">Color &#8595;</a></li><li><a href="#!">Color &#8593;</a></li></ul>

	<!-- template -->
	<ul id='dropdown-temp' class='dropdown-content'>
		<li id="map-sat"><a href="#!" onclick="setTemplate('Empty');"><i class="material-icons">label</i>Empty</a></li>
		<li class="divider" tabindex="-1"></li>
		<li id="map-dir"><a href="#!" onclick="setTemplate('Profile');"><i class="material-icons">badge</i>Profile</a></li>
		<li id="map-dir"><a href="#!" onclick="setTemplate('Instruction');"><i class="material-icons">checklist</i>Checklist</a></li>
		<li class="divider" tabindex="-1"></li>
		<li id="map-route"><a href="#!" onclick="setTemplate('Recipe');"><i class="material-icons">restaurant</i>Recipe</a></li>
		<li id="map-route"><a href="#!" onclick="setTemplate('Sequence');"><i class="material-icons">dry_cleaning</i>Sequence</a></li>
		<li id="map-route"><a href="#!" onclick="setTemplate('Graph');"><i class="material-icons">fort</i>Graph</a></li></ul>
	
	<!-- map types -->
	<ul id='dropdown-map' class='dropdown-content'>
		<li><a onclick="setMap('empty');"><i class="material-icons">label</i>Empty</a></li>
		<li class="divider" tabindex="-1"></li>
		<li><a onclick="setMap('street');"><i class="material-icons">badge</i>Street</a></li>
		<li><a onclick="setMap('building');"><i class="material-icons">checklist</i>Building</a></li>
		<li class="divider" tabindex="-1"></li>
		<li><a onclick="setMap('satellite');"><i class="material-icons">restaurant</i>Satellite</a></li>
		<li><a onclick="setMap('terrain');"><i class="material-icons">dry_cleaning</i>Terrain</a></li>
		<li><a onclick="setMap('ocean');"><i class="material-icons">fort</i>Ocean</a></li></ul>

<!-- dialog -->
<div id="modal1" class="modal bottom-sheet content loader"><div id="domain-info" class="modal-content grey lighten-4" style="box-shadow: 1px 18px 24px 1px inset cornsilk" ></div></div>

<div id="somedialog2" class="dialog print-help hide-scrollbar" style="z-index:99;display:none;"><div id="someoverlay" class="dialog__overlay hide-scrollbar"></div><div class="dialog__content print-help hide-scrollbar" style="width: 90%; height:80%; text-align:left;overflow:auto; padding:24px;"><div class="morph-shape" data-morph-open="M0,0h80c0,0,0,9.977,0,29.834c0,19.945,0,30.249,0,30.249H0c0,0,0-10.055,0-30.332C0,8.219,0,0,0,0z" data-morph-close="M0,29.75h80c0,0-3.083,0.014-3.083,0.041c0,0.028,3.083,0.042,3.083,0.042H0c0,0,3.084-0.014,3.084-0.042
											C3.084,29.762,0,29.75,0,29.75z"><svg id='test-svg' xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60" preserveAspectRatio="none"><path d="M0,29.75h80c0,0-3.083,0.014-3.083,0.041c0,0.028,3.083,0.042,3.083,0.042H0c0,0,3.084-0.014,3.084-0.042
											C3.084,29.762,0,29.75,0,29.75z"></path></svg></div><div id="dialog-inner2" class="dialog-inner print-help hide-scrollbar" style="overflow:auto;"></div></div></div>

<script>
function connect() {
	if (user.address == "") { setup(); }  $('#user-pane').sidenav('open');	
}
var spinner = 0; 
function resetHome() { 
	if (spinner == 0) {  $("#list-wait").removeClass("image-rotate"); $("#list-wait2").removeClass("image-rotate"); spinner = 1; } 
	else if (spinner == 1) { hideView(); $('#news').show(); $("#stamper").show(); $("#world").show(); spinner = 2;} 
	else { $("#list-wait").addClass("image-rotate"); $("#list-wait2").addClass("image-rotate"); spinner = 0;} }

function getParameter() { var path = window.location.href.replace('https://',''); var domain = path.substring(path.indexOf("/")+1, path.length); return domain; }

function redirect() { var path = window.location.href.replace('https://','').replace('/','').replace('#',''); //alert(path);
	switch (path) {
		case 'dralun.com': document.title = "Dralun · dee*d/omain"; showFav(''); 
			var gear = Math.floor(Math.random() * (42 - 1 + 1)) + 1; document.getElementById('list-wait').src = "res/img/gear/gear" + gear.toString() + ".png";
	var gear2 = Math.floor(Math.random() * (42 - 1 + 1)) + 1; document.getElementById('list-wait2').src = "res/img/gear/gear" + gear2.toString() + ".png";
			showDoc('PLANME'); break;
		case 'ur.land': showFav('ur/'); 
			document.getElementById('list-wait').src = "res/img/hour_glass.png";
			document.getElementById('list-wait2').src = "res/img/hour_glass.png";
			break;
 }
	
	var page = getParameter(); //alert(page);
	switch (page) {
		case '?action=about': showDoc('about'); break; }  }
	
function domainFind() {
    var domainName = window.location.host; var pathName = window.location.pathname.replaceAll('/',''); var searchName = window.location.search.replaceAll('?domain=','');
    if (domainName == "ustat.us" && pathName != "") { showView('map'); map.resize(); showMark3(pathName); } }
//var elems = document.querySelectorAll('.modal'); var instances = M.Modal.init(elems); });


var width = window.innerWidth; var height = window.innerHeight + 48;
async function initial() { $('body').css("background-color","lightgrey"); setTitle();
	$('.tabs').tabs();  $('select').formSelect();
	$('.modal').modal(); //$('#dialog-inner2').css("height", window.innerHeight - 375);
	$("#registry-open").css("height",(height - 120) + "px"); $("#registry-domain").css("height",(height - 120) + "px");
    	//$("#map").css("height",height + "px"); $("#registry").css("height",height + "px"); 
			  
	//$("#editor").css("height",height - 360 + "px");  //$("#pad").css("height",height - 360 + "px");//$('.materialboxed').materialbox();
//$("#world").css("height", height - 80 + "px");
	
	var gear3 = Math.floor(Math.random() * (42 - 1 + 1)) + 1; document.getElementById('user-pic').src = "res/img/gear/gear" + gear3.toString() + ".png";
	var gear3b = Math.floor(Math.random() * (42 - 1 + 1)) + 1; document.getElementById('user-pic2').src = "res/img/gear/gear" + gear3b.toString() + ".png";
	
    	$('#docs').dropdown({ constrainWidth: false, coverTrigger: false } ); $('#doc-hide').dropdown({ constrainWidth: false, coverTrigger: false } ); //hover: true 
	
	$('#dropdown-opener').dropdown({ constrainWidth: false }); $('#dropdown-domainer').dropdown({ constrainWidth: false });
	$('#dropdown-deeder').dropdown({ constrainWidth: false }); $('#dropdown-maper').dropdown({ constrainWidth: false }); $('#dropdown-mediaer').dropdown({ constrainWidth: false });  //$('#dropdown-full4').dropdown({ constrainWidth: false }); $('#dropdown-full5').dropdown({ constrainWidth: false });
    $('#dropdown-template').dropdown({ constrainWidth: false }); $('#dropdown-mapper').dropdown({ constrainWidth: false });
	$('#user-pane').sidenav({ edge: 'right' }); $('#deed-pane').sidenav({ edge: 'left', onCloseEnd: populateMap });  redirect();
    
   	hideView(); 
			  //$('#news').show(); $("#stamper").show(); $("#world").show(); //searchClear();
     //setNotice('...latest domain...');
    	setTimeout(function() { $(".loader").css("visibility", "visible"); redirect();  $('img').on('dragstart', function(evt) { return false; }); }  , 500); }


var mapSwitch = true; var introSwitch = true;
function populateMap() {
deedMap(); 
}

var complete; var reset = false; var first = true; var nfnth = false;
function showNfNth() { if (nfnth) {nfnth = false;} else {nfnth = true;}  }
function showList(area) {  $("#registry").html(''); $("#registry").hide(); 
    switch (area) {
        case "domain": $("#registry-domain").html(''); openDomain();
		    sortSet = [area,domains,0,18,16]; for (let i=0;i<domains.length;i++) { if (domains[i].hide == false) addList(i); } 
		    $("#registry-domain").css("height",(height-16) + "px");
		    //adjustSort(true); 
		    break;
        case "filter":  sortSet = [area,domains,0,18,16]; domains = holder; for (let i=0;i<domains.length;i++) { 
		if (domains[i].hide == false) addList(i); } adjustSort(true); break;
        case "open": $("#registry-open").html(''); sortSet = [area,opens,0,18,16]; for (let i=0;i<opens.length;i++) { 
		if (opens[i].core.slug != "nfnth") { addOpen(i); } else { if (nfnth == true) { addOpen(i); } else { opens[i].checked = false; } } } //adjustSort(false);  
		    $("#registry-open").css("height",(height-16) + "px"); 
		    showList('domain');
		    break; }
    //$("#registry").css("height",height + "px");
    $("#registry").show(); $('img').on('dragstart', function(evt) { return false; }); }

function openDomain() { var any = false;
	
	for (let i=0;i<domains.length;i++) { for (let j=0;j<opens.length;j++) { 
	if (domains[i].core.collection.slug == opens[j].core.slug) { if (opens[j].checked == false) { domains[i].hide = true; } else { domains[i].hide = false; any = true; } }
	  } } 
		      if (any) { 
			      $("#selLink").removeClass('disabled'); $("#dropdown-domainer").removeClass('disabled'); $("#switchLink").removeClass('disabled'); } else { $("#selLink").addClass('disabled'); $("#dropdown-domainer").addClass('disabled'); $("#switchLink").addClass('disabled'); $("#registry-domain").html(""); $("#registry-domain").append("<a onclick='$(\"#token-tabs\").tabs(\"select\", \"test1\");' class='collection-item'>No class selected.</a>"); }
			      
		      }
	
var showGrid = true; var gridSelect = false; 
function switchView() { if (showGrid) { showList('open'); $("#view-icon2").html("view_list"); //$("#view-name2").html("&nbsp;&nbsp;List"); 
				       showGrid = false; } else { showList('domain'); //$("#view-name2").html("&nbsp;&nbsp;Img"); 
								 $("#view-icon2").html("grid_view"); showGrid = true;} }

var showGridOpen = false; var selectOpen = true; var selectDomain = true; var showListOpen = true;
function switchOpen() { if (showGridOpen) { showGridOpen = false; showList('open'); $("#open-icon").html("grid_view");  } else { showGridOpen = true; showList('open'); $("#open-icon").html("view_list"); } }
	function switchDomain() { if (showListOpen) { showListOpen = false; showList('domain'); $("#domain-icon").html("view_list");  } else { showListOpen = true; showList('domain');  $("#domain-icon").html("grid_view"); } }
function selOpen() { for (let i=0;i<opens.length;i++) { opens[i].checked = selectOpen; } showList('open');
	if (selectOpen) { selectOpen = false;   $("#open-sel-icon").html("deselect"); } else { selectOpen = true;  $("#open-sel-icon").html("select_all");} }

function buildCollect(slug) { clearMark(); for (let i=0;i<domains.length;i++) { if (domains[i].core.collection.slug == slug) { domains[i].checked = true; showMark(i); } else { domains[i].checked = false; } } }


function adjustSize(img) {
    if (img.height >= img.width) { adjustment = (img.height - img.width) / 48; shim = 'padding-right'; img.height = "48"; }
    else {adjustment = (img.width - img.height) / 48; shim = 'padding-top'; img.width = "48";}
    img.style.setProperty(shim,adjustment+'px'); img.style.setProperty('display','block');}
	
function selDomain() { for (let i=0;i<domains.length;i++) { if (domains[i].hide != true) { domains[i].checked = selectDomain; } } showList('domain');
	if (selectDomain) { selectDomain = false;   $("#domain-sel-icon").html("deselect"); } else { selectDomain = true;  $("#domain-sel-icon").html("select_all");} }
		    
function setOpen(i) { if (opens[i].checked == true) { opens[i].checked = false; } else { opens[i].checked = true; } }
function setList(i) { if (domains[i].checked == true) { domains[i].checked = false; offLand(i); } else { domains[i].checked = true; onLand(i); } }
function addOpen(i){ var extra = ""; if(opens[i].checked == true) { extra = "checked='checked'"; } 
	if (showGridOpen) {
    		$("#registry-open").append("<a class='collection-item open'><div style='display:flex;justify-content:space-between;align-items:center;'><div><img style='cursor:pointer;' onclick='addOpenDeed(" + i + ");' class='z-depth-1' width='52' height='32' src='" + opens[i].core.banner_image_url + "'/></div>&nbsp;&nbsp;<div style='display:flex;align-items:center;'><div style='display:flex;cursor:pointer;'><div onclick='openInNewTab(\"https://opensea.io/collection/" + opens[i].core.slug + "\");' style='cursor:pointer; width:100px;font-size: 14px;' class='z-depth-1 chip collected hoverable'><img src='res/img/key/" + getCollect(opens[i].core.slug) + "'>" + opens[i].core.slug + "</div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div><label><input type='checkbox' " + extra + " id='check" + i + "' onclick='setOpen(" + i + ");' /><span>&nbsp;</span></label></div></div></div></a>");  } else {
		$("#registry-open").append("<a class='collection-item open'><div style='display:flex;justify-content:space-between;'><div onclick='addOpenDeed(" + i + ");' style='display:flex; justify-content:space-between;align-items:center;cursor:pointer;'>" + opens[i].core.name + "</div><div style='display:flex;align-items:center;'><div class='chip z-depth-1 hoverable collected' style='font-size:14px;cursor:pointer;' onclick='openInNewTab(\"https://opensea.io/collection/" + opens[i].core.slug + "\");'>" + opens[i].core.slug + "&nbsp;·&nbsp;<span style='font-weight:bold;font-size:13px;'>" + opens[i].count + "</span></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div><label><input type='checkbox' " + extra + " id='check" + i + "' onclick='setOpen(" + i + ");' /><span>&nbsp;</span></label></div></div></div></div></a>");  } }
	
function addOpenDeed(i) { $("#somedialog2").css("z-index",1004);
    setDialog("<div style='text-align:center;'><p><span style='font-weight:16px'>" + opens[i].core.name + "</span>&nbsp;&nbsp; · &nbsp;&nbsp;<a style='cursor:pointer;' onclick='openInNewTab(\"https://opensea.io/collection/" + opens[i].core.slug + "\");'>" + opens[i].core.slug + "</a></p></div><br/><div style='text-align:center;'><img style='width:80%;' src='" + opens[i].core.banner_image_url + "' /></div><br/><br/><div style='text-align:center;'><div style='display:flex;align-items:center;justify-content:center;'><img class='z-depth-2' onclick='openInNewTab(\"https://opensea.io/collection/" + opens[i].core.slug + "\");' style='cursor:pointer; margin-right:12px;display:none;' onload='adjustSize(this);' src='img/icon/key/" + getCollect(opens[i].core.slug) + "' /><span class='blue-grey lighten-3 badge z-depth-1' style='color:black!important;font-weight:bold;'>" + opens[i].count + "</span></div><br/><br/>" + renderMd(opens[i].core.description) + "</div><br/><br/>");
			
			$('#deed-pane').sidenav('close');
			}
	
function addList(i){ var extra = ""; if(domains[i].checked == true) { extra = "checked='checked'"; } var filler = "";
	if (domains[i].item) { filler = "beige;' class='amber"; } else { filler = "ghostwhite;' class='grey"; }
	if (showListOpen) {
    		$("#registry-domain").append("<a class='collection-item'><div style='display:flex;justify-content:space-between;'><div style='display:flex;justify-content:space-between;align-items:center;' onclick='flyMark(" + i + ");'>" + domains[i].core.name + "</div><div style='display:flex; justify-content:space-between;align-items:center;'><div style='display:flex;'><span id='l" + i + "' style='color:" + filler + " btn waves-effect waves-light lighten-4' onclick='buildLand(" + i + ");'><i class='material-icons'>landscape</i></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div style='display:flex;align-items:center;'><label style='display:flex;'><input type='checkbox' " + extra + " onclick='setList(" + i + ");' /><span></span></label></div></div></div></div></a>"); } else {
		$("#registry-domain").append("<a class='collection-item'><div style='display:flex;justify-content:space-between;'><div><img style='cursor:pointer;' onclick='showView(\"list\"); showList(\"domain\"); flyMark(" + i + ");' class='z-depth-1' width='52' height='30' src='" + domains[i].core.image_url + "'/></div><div style='display:flex; justify-content:space-between;align-items:center;'><span style='color:" + filler + " btn waves-effect waves-light lighten-4' onclick='buildLand(" + i + ");'><i class='material-icons'>landscape</i></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div style='display:flex; flex-direction:column;'><label style='display:flex;'><input type='checkbox' " + extra + " onclick='setList(" + i + ");' /><span></span></label></div></div></div></a>"); } }
	
function buildLand(i) { if (domains[i].item == false) { onLand(i); } else { offLand(i); } }
function onLand(i) { domains[i].item = true; $("#l"+i).css('color','beige'); $("#l"+i).addClass('amber'); $("#l"+i).removeClass('grey');
	 $("#lm"+i).css('color','beige'); $("#lm"+i).addClass('amber'); $("#lm"+i).removeClass('grey'); }
function offLand(i) { domains[i].item = false; $("#l"+i).css('color','ghostwhite'); $("#l"+i).addClass('grey'); $("#l"+i).removeClass('amber');
	$("#lm"+i).css('color','ghostwhite'); $("#lm"+i).addClass('grey'); $("#lm"+i).removeClass('amber'); }
	
function addListDetail(i) { //pullOwner(i); pullPrice(i);
	var card = "";
	for (var a = 0; a < opens.length; a++) { if (opens[a].core.slug == domains[i].core.collection.slug) card = opens[a].core.banner_image_url; }
	
     	$("#domain-info").html('<div style="display:flex;justify-content:space-evenly;align-items:center;width:100%;padding-top:12px;"><div style="display: flex;flex-direction: column;text-align: left;align-items:center;width:100%;margin-top:12px;"><div style="display:flex; justify-content:center; width:80%; margin-bottom:12px;"><div style="display:flex;cursor:pointer;align-items:center;margin-top:24px;flex-direction:column;"><div><img width="64" height="64" src="' + domains[i].core.image_url + '"/>' + badge('gps','x,y') + '</div><div><img class="z-depth-1" width="52" height="32" src="' + card + '"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<div onclick="openInNewTab(\'https://opensea.io/collection/' + domains[i].core.collection.slug + '\');" style="cursor:pointer; width:100px;font-size: 14px;" class="z-depth-1 chip collected hoverable"><img src="res/img/key/' + getCollect(domains[i].core.collection.slug) + '">' + domains[i].core.collection.slug + '</div></div></div><div style="display:flex; flex-direction:column;">' + badge('artifact','2') + badge('ur','289') + badge('deed','0.1') + '</div></div><div style="margin-top:24px; margin-bottom:16px;">' + domains[i].name + '&nbsp;&nbsp · &nbsp;&nbsp<a onclick="openInNewTab(\'' + domains[i].core.external_link + '\');">' + domains[i].core.name + '</a></div><br/></div></div>');

} 
	
function addListDeed(i) { var embedDisplay = "";
	//if (domains[i].core.animation_url != null) {  } else { 
		embedDisplay = "<img  style='width:80%;' src='" + domains[i].core.image_url + "' />"; // }
//embedDisplay = '<video id="vid" style="width:80%;" width="320" height="240" controls loop poster="' + domains[i].core.image_url + '"><source src="https://cdn.jsdelivr.net/gh/nfnth/data@latest/res/media/01G00GY1BXV1FQDHD9TPRYS32P.mp4" type="video/mp4"></video>';
//function change(a){ document.getElementById('vid').poster=a; document.getElementById('vid').src=a.replace('res/raw/','res/media/').replace('.jpg','.mp4'); }
		
	return "<div style='text-align:center;'><p><span style='font-weight:16px'>" + domains[i].name + "</span>&nbsp;&nbsp; · &nbsp;&nbsp;<a onclick='openInNewTab(\"" + domains[i].core.external_link + "\");'>" + domains[i].core.name + "</a></p></div><br/><div id='emDisp' style='text-align:center;'>" + embedDisplay + "</div></br><p>" + domains[i].core.description + "</p><a onclick='openInNewTab(\"" + domains[i].ref + "\");'>Read more...</a><br/><br/><div style='text-align:center;'><img style='max-width:80%;' src='" + domains[i].img + "' /></div><br/>";   }
	
function addUserDeed(i) { var embedDisplay = "";
	embedDisplay = "<img  style='width:80%;' src='" + domainMd.image + "' />"; // }
		
	return "<div style='text-align:center;'><p><span style='font-weight:16px'><a onclick='openInNewTab(\"" + domainMd.link + "\");'>" + domainMd.name + "</a></p></div><br/><div id='emDisp' style='text-align:center;'>" + embedDisplay + "</div></br><p>" + domainMd.content + "</p><br/>";   }
	
function addArtDeed(i) { var embedDisplay = "";
	embedDisplay = "<img  style='width:80%;' src='" + artifacts[i].image + "' />"; // }
		
	return "<div style='text-align:center;'><p><span style='font-weight:16px'><a onclick='openInNewTab(\"" +artifacts[i].link + "\");'>" + artifacts[i].name + "</a></p></div><br/><div id='emDisp' style='text-align:center;'>" + embedDisplay + "</div></br><p>" + artifacts[i].content + "</p><br/>";   }
	
function showArea(area) { setDialog($("#"+area).html()); $('#user-pane').sidenav('close'); }

function showDoc(doc) { $.get('res/doc/'+doc, function(data) { setDialog(renderMd(data)); }); }
function tempDoc(doc) { $.get(doc, function(data) { setDialog(renderMd(data)); }); }
	
function buildDeed(i) { setDialog(addUserDeed());  }
function buildDomain(i) {  setDialog(addListDeed(i)); $('#deed-pane').sidenav('close'); }
function buildArtifact(i) { setDialog(addArtDeed(i)); }

function buildWallet(i) {
	pullOwner(i); // pullPrice(i);
}
	
function updateWallet(i) {
	
}

function pullStats(i) {
	$("#s"+i).html("<a><span style='display:flex;' class='badge amber'>289 UR&nbsp;&nbsp;<i class='material-icons'>token</i></span></a><br/><a><span style='display:flex;' class='badge green'>3 artifact&nbsp;&nbsp;<i class='material-icons'>inventory_2</i></span></a>");
	
	$("#t"+i).html("<a><span style='display:flex;' class='badge blue'>.3 ETH&nbsp;&nbsp;<i class='material-icons'>sailing</i></span></a>");
}
function updateInfo(i) { 
	
	if (domains[i].owner == "0x8a83fbbacb82030ea17179c0403b04e7bce7ba10") { M.toast({html: 'No owner found.'});
$("#o"+i).html("<img src='res/img/seal3.png' width='48' />");
 } else { 
	//fly to owner's place...	
	}
	$("#d"+i).html(domains[i].price); if (domains[i].price != "Unlisted") { $("#d"+i).html($("#d"+i).html() + " ETH"); }
	
	$("#o"+i).html(addWallet(domains[i].owner)); $("#c"+i).html(addWallet(domains[i].owner)); }
	
function setDialog(text) { 
	$("#somedialog2").css("z-index",1004); document.getElementById('dialog-inner2').scrollTo(0, 0);
	
var element = document.getElementById('dialog-inner2'); $("#dialog-inner2").html(text);
var positionInfo = element.getBoundingClientRect();
var height = positionInfo.height; var width = positionInfo.width;

    var myDiv = document.getElementById('dialog-inner2'); myDiv.scrollTop = 0;
    somedialog = document.getElementById( 'somedialog2' ); morphEl = somedialog.querySelector( '.morph-shape' );
    s = Snap( morphEl.querySelector( 'svg' ) ); path = s.select( 'path' );
    steps = { open : morphEl.getAttribute( 'data-morph-open' ), close : morphEl.getAttribute( 'data-morph-close' )};
    dlg2 = new DialogFx( somedialog, {
        onOpenDialog : function( instance ) { path.stop().animate( { 'path' : steps.open }, 400, mina.easeinout );},
        onCloseDialog : function( instance ) { path.stop().animate( { 'path' : steps.close }, 400, mina.easeinout );	}	} ); dlg2.toggle(dlg2); }

function getCollect(value) {
    switch(value) {
        case 'librar': return 'tan.png'; case 'patric': return 'orange.png'; case 'clini': return 'pink.png'; case 'sect': return 'green.png'; case 'technic': return 'white.png'; case 'utili': return 'gray.png'; case 'civilia': return 'blue.png'; case 'tact': return 'red.png'; case 'elect': return 'yellow.png'; case 'agrar': return 'brown.png'; case 'logicia': return 'purple.png'; case 'custo': return 'black.png';
        default: return 'blue_swords.png'; }}

function getColor(value) {
    switch(value) {
	case 'tact': return 1; case 'patric': return 2; case 'elect': return 3; case 'sect': return 4; case 'civilia': return 5; case 'logicia': return 6; case 'clini': return 7; case 'librar': return 8; case 'agrar': return 9; case 'technic': return 10; case 'utili': return 11; case 'custo': return 12;
        default: return 'blue_swords.png'; }}
			
function filterList(slug) { holder = []; for (var a = 0; a < domains.length; a++) { if (domains[a].core.collection.slug == slug) { holder.push(domains[a]); } } showList('filter'); sorter(); }



function addWallet(id) {return '<div style="cursor:pointer; display: flex; flex-direction: column; text-align: center;" onclick="copyClip(\'' + id + '\');"><img class="z-depth-1" src="https://chart.googleapis.com/chart?chs=120x120&cht=qr&chl=' + id + '&choe=UTF-8" /><br/><span>Unclaimed  🏞️</span></div>';  }

function readArtifact() { pullInfo(); }

var domainFound = false;
var info;
function showDomain(domain) { $.get("doc/domain/"+domain, function(data) {setDialog(renderMd(data));}).fail(function(){setDialog('No domain info found.');});}



function updatePreview() { 
	$("#editor-image").attr("src", tempArtifact.image_url); $("#editor-image").attr("onclick", "setDialog(tempArtifact.description);"); $("#editor-name").html(tempArtifact.name); }
	
var listCount = 0;

var searchMatch = []; function setClear() { $('#search').val(''); }
function setResults() { searchMatch = []; searchResult = "";
    for(var i = 0;i < domains.length;i++) { if (domains[i][4].search($('#search').val()) != -1) { searchMatch.push(domains[i][4]);
        searchResult += "<div><a href='https://'" + domains[i][4] + "'>" + domains[i][4] + "</a></div><br/>"; } }
    $('#results').html(searchResult); showView('results'); }


function postDeed() {  
	editMd.name = document.getElementById("edit-name").value; editMd.color =  document.getElementById("favcolor").value; editMd.datetime = switchTime(); editMd.location = coordinates.toString(); editMd.content = $("#pad").html();	     
	postDomain(true);
}
function setText() {
	editMd.name = document.getElementById('edit-name').value;
}

function setContent() { editMd.content = $("#pad").html();
showView('mapper');	
}
function setPreview() {
var preview = document.getElementById("preview");
var thumb = document.getElementById("thumb");
const [file] = preview.files
  if (file) {
    if (file.size > 10000000) { alert ('too big'); } else {
        thumb.src = URL.createObjectURL(file); $("#press").html("done");
        $("#editThumb").addClass("green");$("#editThumb").removeClass("blue-grey"); }}}
function changeFocus() { var element = $("#pad"); element.attr("tabindex", -1).focus().val(element.val()); }
function showPreview(){
    setDialog('<div id="viewer" style="text-align:left;padding:24; overflow-y:auto; width: 85%;float: right;padding-right: 64;"></div>');
    var text = document.getElementById('pad').textContent; $("#viewer").html(renderMd(text));}
//document.getElementById('select-sort').getElementsByTagName('option')[0].selected = 'selected';

function checkFile() { setPreview();
//var files = document.getElementById("fileinput");
//for (var a = 0; a < files.files.length; a++)
//{
  //  alert(files.files[a].name);
//}
//document.getElementById("fileinput").files[0];
}

function setArtifact() { var contenteditable = document.getElementById('pad'); text = contenteditable.textContent; signer('wallet', text); M.toast({html: 'Artifact created.'}); }
var setStatus;
function setNotice(text) {
    setTimeout( function() {
        var notification = new NotificationFx({
            message : text, //'<span class="icon icon-megaphone"></span><p>You have some interesting news in your inbox. Go <a href="#">check it out</a> now.</p>',
            layout : 'bar', effect : 'slidetop', type : 'notice', // notice, warning or error
            onClose : function() {   }}); notification.show();	}, 1200 ); }

setStatus = function (text) { //- year.day of year-time (hover to show month/day of week)
    setTimeout( function() {
        var notification = new NotificationFx({
            message : '<br/><i class="material-icons">dns</i>&nbsp;&nbsp;Console<br/><br/>' + datestamp + '@' + timestamp + '<br/>' + info, //'<span class="icon icon-calendar"></span><p>The event was added to your calendar. Check out all your events in your <a href="#">event overview</a>.</p>',
            layout : 'attached', effect : 'bouncyflip', type : 'notice', // notice, warning or error
            onClose : function() { }	}); notification.show(); }, 1200 ); }

function setForm() { showView('editor'); }
	//setDialog($("#former").html()); }
$('#somedialog2').attr('style','z-index:99;');

// console
var onTime = false;


// add calculator... //replace youtube with html5 video?



	//setDialog($("#editor").html()); }
	
function searchResults(text) { if(event.key === 'Enter') { openInNewTab('https://presearch.com/search?q=' + $(text).val()); }}</script>
