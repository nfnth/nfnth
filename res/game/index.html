<html>
    <head>
	<title>Star Defenders 3D</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="js/three.js-dev/build/three.js"></script>
	<script src="js/three.js-dev/examples/js/shaders/CopyShader.js"></script>
	<script src="js/three.js-dev/examples/js/postprocessing/EffectComposer.js"></script>
	<script src="js/three.js-dev/examples/js/postprocessing/ShaderPass.js"></script>
	<script src="js/three.js-dev/examples/js/postprocessing/RenderPass.js"></script>
	<script src="js/three.js-dev/examples/js/renderers/Projector.js"></script>
   	<script src="js/three.js-dev/examples/js/DeviceOrientationControls.js"></script>
    
	<script src="js/THREE_addon.js"></script>
	<script src="js/BitmapData.js"></script>
	<script src="js/ftscroller.js"></script>
	<script src="js/lz-string.js"></script>
    
	<script type="text/javascript">
		var ng = ( document.location.href.indexOf('gevanni.com') === -1 );
		var allow_music = ( document.location.href.indexOf('itch.io') === -1 && document.location.href.indexOf('hwcdn.net') === -1 );
	</script>
    
    </head>
    <body style="margin:0px;overflow:hidden" ondragstart="return false;" ondrop="return false;">
	<script src="js/libs/gpu_js_min.js"></script>
	<script src="js/libs/brain.js"></script>
	<!--<script src="js/libs/synaptic.js"></script>-
	<script src="js/libs/ml5.js"></script>-->
	
	<script src="js/sdShaderMaterial.js"></script>
	<script src="js/sdRandomPattern.js"></script>
	<script src="js/peer.js"></script>
	<script src="js/md5-min.js"></script>
	<script src="js/sdSync.js"></script>
	<script src="js/sdByteShifter.js"></script>
	<script src="js/sdCharacter.js"></script>
	<script src="js/sdBullet.js"></script>
	<script src="js/sdAtom.js"></script>
	<script src="js/sdLamp.js"></script>
	<script src="js/sdSound.js"></script>
	<script src="js/pb2HighRangeColor.js"></script>
	<script src="js/sdChunk.js"></script>
	
	<script src="js/main.js"></script>
	
	<script src="js/sdNet.js"></script>
	<script src="js/sdSprite.js"></script>
	<script src="js/sdAI.js"></script>
	
	<script src="js/Guns/sdGun.js"></script>
	<script src="js/Guns/sdGunClass.js"></script>
	
	    <!-- Crosshair -->
	    <img id="crosshair" src="assets/crosshair.png" style="position: fixed;left:50%;margin-left: -6px;margin-top: -6px;top: 50%;width:89px;height:89px;/*image-rendering: pixelated;*/">

	    <!-- Healthbar -->
	    <span class="r_conteiner" style="position:fixed;left:50%;width:40vh;margin-left:-20vh;bottom:0.5vh;padding:0.25vh;border-radius:1.5vh;background-color:rgba(0,0,0,0.5);">
		<span class="r_conteiner" style="width:100%;display:inline-block;padding:0px;border-radius:1vh;">
		    <span id="hp_bar" class="r_conteiner" style="width:50%;background-color:rgba(91, 160, 91, 0.5);padding:0vh;text-align:center;border-radius:1vh;color:#ffffff;font-size:0.8vh;text-shadow: 0px 0px 1vh rgba(0,0,0,4);"></span></span></span>
	    
	    <!-- Ammo -->
	    <span id="ammo_bar" class="r_conteiner" style="position:fixed;bottom:3vh;display:block;left:50%;width: 18vh;margin-left: -9vh;text-align:center;font-size: 1vh;font-family:courier">100 | 100</span>

	 <!--   <span id="clocks" style="position:fixed;left:50%;top:5vh;width:10vh;margin-left:-5vh;vertical-align: middle;text-align:center;color:rgba(0,0,0,0.4)">1:41</span>-->
	
	    <span id="menu" class="r_conteiner clickable" style="position:fixed;left:50%;width:78vh;margin-left:-39vh;top:50%;margin-top:-44vh;background-color:rgba(27, 27, 27, 0.95);">
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Sensitivity:</span><input id="sensitivity" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="0.01" step="0.0001" onChange="localStorage.setItem('stardefenders_sensitivity', this.value ); main.sensitivity = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Turn method:</span><select id="turn_method" style="width:80%;display:inline-block;" onChange="localStorage.setItem('stardefenders_turn_method', this.value ); main.turn_method = Number( this.value );">
		    <option value="0">Freely</option>
		    <option value="1">2-Axis</option>
		</select></div>
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Quality:</span><input id="quality" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="0.01" onChange="main.SetPixelRatio( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">AI difficulty</span><input id="ai_difficulty" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="0.01" onChange="localStorage.setItem('ai_difficulty', this.value ); main.ai_difficulty = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">FOV:</span><input id="fov" class="slider" style="width:60%;display:inline-block;" type="range" min="60" max="180" step="1" onChange="localStorage.setItem('stardefenders_fov', this.value ); main.fov = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Light intensity:</span><input id="dynamic_light_intensity" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="0.01" onChange="localStorage.setItem('stardefenders_dynamic_light_intensity', this.value ); main.dynamic_light_intensity = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Sound volume:</span><input id="sound_volume" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="0.001" onChange="localStorage.setItem('stardefenders_sound_volume', this.value ); main.sound_volume = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Music volume:</span><input id="music_volume" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="0.001" onChange="localStorage.setItem('stardefenders_music_volume', this.value ); main.music_volume = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Gun X offset</span><input id="gun_x_offset" class="slider" style="width:60%;display:inline-block;" type="range" min="-10" max="10" step="0.25" onChange="localStorage.setItem('stardefenders_gun_x_offset', this.value ); main.gun_x_offset = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Gun Y offset</span><input id="gun_y_offset" class="slider" style="width:60%;display:inline-block;" type="range" min="-10" max="10" step="0.25" onChange="localStorage.setItem('stardefenders_gun_y_offset', this.value ); main.gun_y_offset = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Gun Z offset</span><input id="gun_z_offset" class="slider" style="width:60%;display:inline-block;" type="range" min="-10" max="10" step="0.25" onChange="localStorage.setItem('stardefenders_gun_z_offset', this.value ); main.gun_z_offset = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Gun recoil</span><input id="gun_recoil" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="5" step="0.1" onChange="localStorage.setItem('stardefenders_gun_recoil', this.value ); main.gun_recoil = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">First person camera</span><input id="first_person_camera" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="1" onChange="localStorage.setItem('stardefenders_first_person_camera', this.value ); main.first_person_camera = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Report damage</span><input id="report_damage" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="1" onChange="localStorage.setItem('report_damage', this.value ); main.report_damage = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<div style="margin-bottom:1vh"><span style="display:inline-block;width:20%">Low physics</span><input id="low_physics" class="slider" style="width:60%;display:inline-block;" type="range" min="0" max="1" step="1" onChange="localStorage.setItem('low_physics', this.value ); main.low_physics = Number( this.value ); main.ShowSliderNumber( this, 0 );" onFocus="main.ShowSliderNumber( this, 1 );" onBlur="main.ShowSliderNumber( this, 2 );"><input type="text" value="?" style="width:15%;display:inline-block;margin-left:1vh"></div>
		
		<a href="javascript:document.getElementById('menu').style.display='none';main.ingame_menu_visible=false;main.GoFullscreen();" class="r_conteiner" style="margin-bottom:1vh;background-color: #254e36;">Continue</a>
        
		<a href="javascript:sdNet.EndGame();" class="r_conteiner" style="background-color: #482926;">Leave match</a>
	    </span>
	</div>

	<div id="lobby_ui" style="width:100%;height:100%;position:fixed;left:0px;top:0px;display:none;background-image: url(assets/menu_bg.png);background-size: cover;background-position: center;" >
	    
	 <!--   <div id="hakase_talk_blob" style="min-width:500px;position:fixed;right:30px;bottom:300px;display:block;text-align: center"><span id="message_of_the_day" class="clickable" style="padding:15px;display:inline-block;background-color:#FFFFFF;border-radius:15px;color:black;text-align:center;"></span></div>
	    
	    <img id="hakase" src="assets/hakase2.gif" class="clickable" style="width:500px;height:275px;position:fixed;right:0px;bottom:0px;" onClick="Boop()"> -->
	    
	    <!--<span id="sd_stats" class="r_conteiner clickable" style="display:block;text-align:right;position:fixed;top:10px;right:10px;width:300px;">Skill points</span>-->

	    <!-- some beta UI -->
	    <span class="r_conteiner clickable" style="position:fixed;left:1vh;top:1vh;width: 131vh;"><!--
		--><a href="javascript:sdNet.OfflineTraining( 2 );" class="r_conteiner" style="display:inline-block;margin-right:1vh;">Play solo vs AI</a><!--
		--><a href="javascript:sdNet.OfflineTraining( 1 );" class="r_conteiner" style="display:inline-block;margin-right:1vh;">Play with AI vs AI</a><!--
		--><a href="javascript:sdNet.OfflineTraining( 0 );" class="r_conteiner" style="display:inline-block;margin-right:1vh;">Play alone</a><!--
		<a href="javascript:sdNet.OfflineTraining( 3 );" class="r_conteiner" style="display:inline-block;margin-right:3vh;">Play with player mimicking AI (brain.js)</a>
		--><a href="javascript:sdNet.QuickPlay( sdNet.MODE_FFA );" class="r_conteiner" style="display:inline-block;margin-right:1vh;" id="play_ffa_btn">Quick Play FFA <span style="color:rgba(255,255,255,0.3)">(2+ players, multiplayer)</span></a><!--
		--><a href="javascript:sdNet.QuickPlay( sdNet.MODE_TEAM_VS_TEAM );" class="r_conteiner" style="display:inline-block;margin-right:1vh;" id="play_tvt_btn">Quick Play TvT <span style="color:rgba(255,255,255,0.3)">(2+ players, multiplayer)</span></a><!--
		--><a href="javascript:sdNet.QuickPlay( sdNet.MODE_AS_ONE );" class="r_conteiner" style="display:inline-block;margin-right:3vh;" id="play_as1_btn">Quick Play As One <span style="color:rgba(255,255,255,0.3)">(4+ players, multiplayer)</span></a><!--
        
		--><a href="javascript:(function(){if(window.location.href.indexOf('https://')!==0){if(confirm('We have to move you to https version of this page first (we might miss SSL certificate for now)')){window.location=window.location.href.split('http:').join('https:');}return;}alert('Just press ⋮ at right top corner of your browser and press \'\'Add to homescreen\'\'.');})()" class="r_conteiner" style="display:inline-block;" id="install_to_android_btn">Install to Android <span style="color:rgba(255,255,255,0.3)">(no permissions required - just Chrome)</span></a><br><!--
		--><span id='status_field' class="r_conteiner" style="display:inline-block;background-color:#000;color:#666;width:100%;margin-top:1vh">status</span><!--
	    --></span>


	    <span class="r_conteiner clickable" style="position:fixed;left:1vh;top:13vh;width:20vh;height:86vh;">
		<span class="r_conteiner" style="width:100%;margin-bottom:1vh;font-size: 1.5vh;">Players in lobby now</span>
		<div id="online_players" class="clickable" style="height:calc(100% - 5vh);">
		    Loading...</div></span>

	    <span class="r_conteiner clickable" style="position:fixed;left:22vh;top:12vh;width:20vh;height:87vh;display:none;">
		<span class="r_conteiner" style="width:100%;margin-bottom:1vh;font-size: 1.5vh;">Your group</span>
		<div id="group_players" class="clickable" style="height:calc(100% - 5vh);">
		    Loading...</div></span>

	    <span class="r_conteiner clickable" style="position:fixed;left:43vh;top:12vh;width:20vh;height:87vh;display:none;">
		<span class="r_conteiner" style="width:100%;margin-bottom:1vh;font-size: 1.5vh;">Your opponent group</span>
		<div id="enemy_group_players" class="clickable" style="height:calc(100% - 5vh);">
		    Loading...</div></span>
	
	    <div id="floating_user_info_bg" style="position:fixed;left:0px;top:0px;width:100%;height:100%;background-color: transparent;display:none" class="r_conteiner clickable" onMouseDown="if (event.target===this)sdNet.CloseUserMenu();">
		<div id="floating_user_info" style="position:fixed;left:0px;top:0px;background-color: rgba(0,0,0,0.8)" class="r_conteiner clickable">

		</div></div></div>
	
	<div id="loading_screen" class="clickable" style="display:none;background:repeating-linear-gradient(-45deg, rgba(0,0,0,0.75) 0px, rgba(0,0,0,0.75) 10px, rgba(0,0,0,0.8) 10px, rgba(0,0,0,0.8) 20px);width:100%;height:100%;position:fixed;left:0px;top:0px;">
	    
	    <div class="r_conteiner" style="background-color:rgba(0,0,0,1);margin-left: auto;margin-right: auto;text-align: center;width: 79vh;margin-top: 15%;padding: 5vh;">
	    Building map, please wait...<br><br><span style="color: #474;">(it can take 15 seconds or more, depending on browser and PC characteristics)</span>
	    </div></div>
	
	<script type="text/javascript">
		if ( ng ){
		    document.getElementById('play_ffa_btn').style.display = 'none';
		    //document.getElementById('play_tvt_btn').style.display = 'none';
		    document.getElementById('play_as1_btn').style.display = 'none';
		    document.getElementById('install_to_android_btn').style.display = 'none';
		}
		else{
		    document.getElementById('play_ffa_btn').style.display = 'none';
		    //document.getElementById('play_tvt_btn').style.display = 'none';
		    document.getElementById('play_as1_btn').style.display = 'none';
		    document.getElementById('install_to_android_btn').style.display = 'none';
		}
		document.getElementById('lobby_ui').style.display = 'inherit';
	    
	    let scroll = new FTScroller( document.getElementById('online_players'), { scrollbars: true, scrollingX: false, scrollingY: true, bouncing: false });
	    scroll = new FTScroller( document.getElementById('group_players'), { scrollbars: true, scrollingX: false, scrollingY: true, bouncing: false });
	    scroll = new FTScroller( document.getElementById('enemy_group_players'), { scrollbars: true, scrollingX: false, scrollingY: true, bouncing: false });
	    
	    /*let first_upd = setInterval( function()
	    {
		sdNet.QuickPlaySeeker();
		
		//if ( !document.hasFocus() )
		//return;
		    
		if ( sdNet.pass_plus_key === null )
		return;
	    
		if ( document.getElementById('lobby_ui').style.display === 'inherit' )
		{
		    sdNet.UpdateOnlinePlayers();
		    sdNet.UpdateGroupPlayers();
		    sdNet.UpdateEnemyGroupPlayers();
		}
	    }, 1000 ); */
	    
	    document.addEventListener('mousedown', function( e )
	    {
		//if ( e.srcElement.nodeName === 'A' )
		if ( e.currentTarget.nodeName === 'A' )
		sdSound.PlayInterfaceSound({ sound: lib.ui_down, volume: 1 });
		
		return false; }, false);
		
		sdNet.OfflineTraining( 0 );
	  
	</script></body></html>
